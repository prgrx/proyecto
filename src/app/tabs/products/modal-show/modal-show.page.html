<ion-header translucent>
  <ion-toolbar>
    <ion-title>{{product?.name}}</ion-title>
    <ion-buttons slot="end" (click)="dismissModal()">
      <ion-icon name="close-circle-outline" class="close-icon"></ion-icon>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content *ngIf="product">
  <ion-item>
    <ion-avatar slot="start">
      <img
        [src]="product.user_id | photoById | async"
        alt="Avatar of User"
      />
    </ion-avatar>
    <ion-label>
      <h2>{{ userProduct?.name }}</h2>
      <p>Verificado o no verificado</p>
    </ion-label>
  </ion-item>
  <ion-button
    *ngIf="!isSameUser"
    expand="block"
    shape="round"
    class="ion-margin-horizontal ion-margin-bottom btn-contact"
    >{{ product.price ? 'Contactar para comprar' : 'Contactar usuario'}}</ion-button
  >
  <div class="image ion-padding-horizontal">
    <img
      [src]="product.image"
      alt="Image of the product"
      style="display: none"
      onload="this.style.display=''"
    />
  </div>
  <div class="title ion-margin-horizontal border-bottom">
    <p class="price">
      {{product.price ? product.price + ' EUR' : 'Recomendado'}}
    </p>
    <h2 class="name">{{product.name}}</h2>
  </div>
  <ion-item>
    <p class="description">{{product.description}}</p>
  </ion-item>
  <ion-row class="item-button ion-justify-content-evenly ion-padding-vertical" *ngIf="isSameUser || isAdmin">
    <ion-button (click)="openModalCreate()">Editar Producto</ion-button>
    <ion-button (click)="openAlertDelete()" color="danger"
      >Borrar Producto</ion-button
    >
  </ion-row>
  <h2 class="commentsTitle ion-margin-horizontal ion-text-center">Comentarios</h2>
  <div class="ion-margin-horizontal">
    <app-comments [product]="product"></app-comments>
  </div>
</ion-content>

<ion-grid class="ion-padding-horizontal">
  <ion-row>
    <ion-col size="12" class="title">
      <h5 class="ion-text-uppercase" *ngIf="component === 'principal'">Los 10 usuarios m√°s recientes</h5> 
      <h5 class="ion-text-uppercase" *ngIf="component === 'modify'">Todos los usuarios</h5> 
      <form [formGroup]="searchForm" *ngIf="component === 'modify'">
        <ion-searchbar formControlName="searchValue" placeholder="Buscar por nombre o email"></ion-searchbar>
      </form>
    </ion-col>
    <ion-col size="12" class="table" *ngIf="users">
      <table>
        <thead>
          <tr class="ion-text-uppercase ion-text-center">
            <th class="avatar">Avatar</th>
            <th>Nombre</th>
            <th>Email</th>
            <th class="date">Fech. Regis.</th>
            <th class="reports">Reportes</th>
            <th class="state">Estado</th>
            <th class="actions">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let user of users; trackBy: trackByFn"
            class="ion-text-center insideTr"
          >
            <td>
              <img
                [src]="user.uid | photoById | async"
                style="display: none"
                onload="this.style.display=''"
                alt="Avatar"
              />
            </td>
            <td>{{ user.name }}</td>
            <td>{{ user.email }}</td>
            <td>{{ showDate(user.createdAt) | date: "dd/MM/YYYY HH:mm" }}</td>
            <td>
              <ion-row class="ion-align-items-center">
                <p
                  role="button"
                  class="ion-no-margin"
                  (click)="showReports(user)"
                >
                  {{ user.reports.length }}
                  <ion-icon name="caret-down-outline"></ion-icon>
                </p>
                <ion-button>Notificar</ion-button>
              </ion-row>
            </td>
            <td>
              <ion-button
                *ngIf="user.isBanned"
                color="success"
                (click)="openBanUserAlert(user, 'desbanear')"
                >Desbanear</ion-button
              >
              <ion-button
                *ngIf="!user.isBanned"
                color="danger"
                (click)="openBanUserAlert(user, 'banear')"
                >Banear</ion-button
              >
            </td>
            <td>
              <ion-button
                (click)="redirectToUserPage(user)"
                class="buttonAction"
                >Ver perfil</ion-button
              >
              <ion-button class="buttonAction">Contactar</ion-button>
            </td>
          </tr>
        </tbody>
      </table>
    </ion-col>
  </ion-row>
</ion-grid>
